<div class="body">
    <div class="row">
        <div class="text-center col-lg-12">
            <h4 class="form-control">Angular - Dynamically hide-show or add-remove columns in angular material table
            </h4>
        </div><br><br>
    </div>
    <div class="row">
        <div class="col-lg-2"></div>
        <div class="col-lg-8 center">
            <div class="spinner-container" *ngIf="userListMatTabDataSource.loading$ | async">
                <mat-spinner></mat-spinner>
            </div>
            <div class="card">
                <div class="thead">
                    <label for="Table">Demo Table</label>
                    <button style="float:right" class="btn btn-sm btn-primary top-margin" #menuTrigger="matMenuTrigger"
                        [matMenuTriggerFor]="mainMenuButton">
                        hide/show
                    </button>
                    <mat-menu #mainMenuButton="matMenu">
                        <span (click)="$event.stopPropagation()" *ngFor="let column of columnShowHideList;index as i">
                            <mat-slide-toggle [(ngModel)]="column.isActive" (change)="toggleColumn(column)">
                            </mat-slide-toggle>
                            {{column.name}}
                            <br>
                        </span>
                    </mat-menu>
                    <input type="text" style="float:right" (keyup)="applyFilter($event.target.value)"
                        placeholder="search for" class="form-control-sm top-margin">
                </div>
                <mat-table class="mat-elevation-z8" [dataSource]="userListMatTabDataSource" matSort
                    matSortActive="userName" matSortDirection="asc" matSortDisableClear>
                    <ng-container matColumnDef="srno">
                        <mat-header-cell *matHeaderCellDef>Sr No</mat-header-cell>
                        <mat-cell *matCellDef="let user; let i = index;">
                            {{i+1}}
                        </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="userName">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>User Name</mat-header-cell>
                        <mat-cell *matCellDef="let user">
                            {{user.userName}}
                        </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="email">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Email</mat-header-cell>
                        <mat-cell *matCellDef="let user">
                            {{user.email}}
                        </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="contactNo">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Contact No</mat-header-cell>
                        <mat-cell *matCellDef="let user">
                            {{user.contactNo}}
                        </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="address">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>Address</mat-header-cell>
                        <mat-cell *matCellDef="let user">
                            {{user.address}}
                        </mat-cell>
                    </ng-container>
                    <mat-header-row *matHeaderRowDef="columnList"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: columnList; let i = index;"
                        [class.selected]="selectedRow == row.id" (click)="rowClick(row.id)">
                    </mat-row>
                </mat-table>
                <mat-paginator [pageSizeOptions]="[3, 5, 10]" showFirstLastButtons></mat-paginator>
            </div>
        </div>
    </div>
</div>